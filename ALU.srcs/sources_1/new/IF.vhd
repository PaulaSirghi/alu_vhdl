library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;
entity InstrF is
    Port ( 
           clk : in STD_LOGIC;
           en: in std_logic:='0';
           reset: in std_logic:='0';
           i   : out  STD_LOGIC_VECTOR (67 downto 0);
           PC_o   : out STD_LOGIC_VECTOR (31 downto 0));
          
end InstrF;

architecture Behavioral of InstrF is

signal mux1o: std_logic_vector(31 downto 0):="00000000000000000000000000000000";
--semnale pentru PC
signal PCi: std_logic_vector(31 downto 0):="00000000000000000000000000000000";
signal PCo: std_logic_vector(31 downto 0):="00000000000000000000000000000000";
signal Q: std_logic_vector(31 downto 0):="00000000000000000000000000000000";


type tRom is array(0 to 255) of STD_LOGIC_VECTOR(67 downto 0);
signal mem: tRom:=(

B"0000_11111111111111111111111111100111_00000000000000000000000000000101",     --3+6
B"0001_00000000000000000000000000011001_00000000000000000000000000000101",   --15-15
B"0010_00000000000000000000000000011001_00000000000000000000000000000101",   --15 and 4
B"0011_00000000000000000000000000011001_00000000000000000000000000000101",   --15 or 17
B"0100_00000000000000000000000000011001_00000000000000000000000000011001",   -- not 21
B"0101_00000000000000000000000000011001_00000000000000000000000000011001",   --rr 31
B"0110_00000000000000000000000000011001_00000000000000000000000000011001",   --rl 28
B"0111_00000000000000000000000000011001_00000000000000000000000000000101",    --8*5
B"1000_00000000000000000000000000011001_00000000000000000000000000000101",    --55/3
others=>B"0000_00000000000000000000000000000000_00000000000000000000000000000000");

begin
    PC_o<=Q+'1';
    PCi<=Q+'1';
    process(clk,reset,en,PCi)  --PC
    begin
    if reset='1' or PCi="00000000000000000000000000001010" then
      Q<="00000000000000000000000000000000";
    elsif rising_edge(clk) then
       if en='1' then
            Q<=PCi;
      end if;
    end if;
    end process;
    
    process(Q)
    begin --ROM
         i<=mem(conv_integer(Q(4 downto 0)));
    end process;
end Behavioral;